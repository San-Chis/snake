const canvas=document.getElementById("game"),type=canvas.getContext("2d");type.fillStyle="black",type.fillRect(0,0,canvas.width,canvas.height),type.fillStyle="white",type.font="40px Arial",type.fillText("Press any key to start",canvas.width/5,canvas.height/2),document.addEventListener("keydown",startGame);let gameStarted=!1;function startGame(e){gameStarted||(gameStarted=!0,document.removeEventListener("keydown",startGame))}const field=new Image,foodImg=(field.src="img/field.png",new Image);foodImg.src="img/food.png";let box=29,score=0,food={x:Math.floor(16*Math.random()+2)*box,y:Math.floor(16*Math.random()+2)*box},snake=[];snake[0]={x:10*box,y:10*box},document.addEventListener("keydown",direction);let dir;function direction(e){37===e.keyCode&&"right"!=dir?dir="left":38===e.keyCode&&"downt"!=dir?dir="up":39===e.keyCode&&"left"!=dir?dir="right":40===e.keyCode&&"up"!=dir&&(dir="down")}function eatTail(t,a){for(let e=0;e<a.length;e++)t.x==a[e].x&&t.y==a[e].y&&clearInterval(game)}function drawGame(){type.drawImage(field,0,0),type.drawImage(foodImg,food.x,food.y);for(let e=0;e<snake.length;e++)type.fillStyle=0==e?"orange":"green",type.fillRect(snake[e].x,snake[e].y,box,box);type.fillStyle="yellow",type.font="35px  Arial",type.fillText(score,1.5*box,.9*box);let e=snake[0].x,t=snake[0].y;var a;e==food.x&&t==food.y?(score++,food={x:Math.floor(16*Math.random()+2)*box,y:Math.floor(16*Math.random()+2)*box}):snake.pop(),e<2*box||e>18*box||t<2*box||t>18*box?(clearInterval(game),type.fillStyle="black",type.fillRect(0,0,canvas.width,canvas.height),type.fillStyle="white",type.font="40px Arial",type.fillText("Game over reload the page",canvas.width/10,canvas.height/2)):("left"==dir&&(e-=box),"right"==dir&&(e+=box),"up"==dir&&(t-=box),"down"==dir&&(t+=box),a={x:e,y:t},eatTail({x:e,y:t},snake),snake.unshift(a))}let game=setInterval(drawGame,200);